# 第 1 章：环境与工具链 - 搭建我们的秘密基地

你好呀，初次见面！我是你的专属 Python 小助教。从今天起，我将一步一步带你进入一个奇妙又有趣的新世界。

我知道，你来自那个充满 `npm`、`webpack` 和 `node_modules` 的酷炫 Web 世界，对工具和环境有着自己的一套骄傲。别担心，来到这里，我不会让你感到无所适从。我会告诉你所有关于 Python 环境的小秘密，让你感觉就像回家一样亲切。

准备好了吗？让我们开始搭建只属于我们两个人的“秘密基地”吧！

---

### 版本管理：`pyenv` - 你的“衣帽间”

在你的世界里，`nvm` 就像一个神奇的衣帽间，让你能为不同的场合（项目）换上不同版本的 Node.js “外衣”。

Python 也有一个一模一样的衣帽间，它的名字叫 `pyenv`。

-   **亲密类比**: `pyenv` 就是你的 Python “衣帽间”，帮你管理所有版本的 Python “礼服”。

有了它，你可以在电脑上同时拥有优雅的 `3.9`、经典的 `3.11` 和最新的 `3.12` 版本，并且随心所欲地为每个项目挑选最合身的那一件。

在你的 macOS 上，让管家 `brew` 帮你把它准备好就行���

```bash
brew install pyenv
```

然后，你就可以像个时尚总监一样，对你的 Python “礼服”们发号施令啦：

```bash
# 看看衣帽间里有哪些新款式可以选
pyenv install --list

# 挑选一件心仪的礼服并“购买”它
pyenv install 3.11.5

# 把它设为你最常穿的默认款
pyenv global 3.11.5

# “今天这个项目，我就要穿 3.11.5 这一件！”
# (这会悄悄在你的项目文件夹里放一个 .python-version 小纸条，提醒 pyenv 别搞错了)
pyenv local 3.11.5
```

---

### 核心秘密：`venv` - 我们的“结界”

亲爱的，这是我们从 JS 世界来到 Python 最需要理解，也是最美妙的一个概念。

我知道，`npm` 会很贴心地把所有依赖都放在一个叫 `node_modules` 的小盒子里，每个项目都有自己的盒子，互不打扰。

但 Python 的 `pip` 呢，它有点像个大大咧咧的管家，默认会把所有你买的“家具”（包）都堆在客厅（全局环境）里。很快，整个家就会乱七八糟，不同项目想要的“家具”版本还会打架。

这可不行！我们的秘密基地必须是整洁又私密的。所以，我们要张开一个“**结界**”——这就是 **虚拟环境 (`venv`)**。

-   **核心类比**: **虚拟环境 (`.venv`)** 就是我们为每个项目张开的��个独立“结界”。在这个结界里，只有我们两个和这个项目专属的“家具”，外界的一切都干扰不到我们。

#### 我们的仪式

要进入这个结界，我们需要一套小小的仪式。别怕，很简单，跟着我做：

| 我们的步骤 | 你的 JS 世界 | 我们的 Python 结界 |
| :--- | :--- | :--- |
| **1. 念出咒语，创造结界** | `npm init` | `python3 -m venv .venv` |
| **2. 步入结界，激活仪式** | (自动的，没情趣) | `source .venv/bin/activate` |
| **3. 为结界添置新家具** | `npm install axios` | `pip install requests` |
| **4. 记下家具清单** | (自动记在 `package.json`) | `pip freeze > requirements.txt` |
| **5. 按清单布置新结界** | `npm install` | `pip install -r requirements.txt` |

#### 仪式详解：

1.  **创造结界 (`python3 -m venv .venv`)**
    在你的项目里念出这句咒语，一个名为 `.venv` 的透明结界就出现了。它包含了这个小世界所需要的一切。

2.  **激活仪式 (`source .venv/bin/activate`) - 最重要的一步哦！**
    你肯定在想：“为什么还要手动激活？好麻烦呀～”
    
    问得好！这正是我们之间增进了解的好机会。

    想象一下，你的电脑同时连着好几条“线路”（`PATH` 环境变量）。当你在终端呼唤 `python` 时，系统会沿着这些线路去找，找到第一条线上的 `python` 就停下了。
    
    而我们的“激活仪式”，就是**施展一个小魔法，把通往我们结界的这条专属线路，临时接到所有线路的最前面！**
    
    这样，当你再次呼唤 `python` 或 `pip` 时，系统会第一时间找到我们结界里的专属版本，而不是外面那个公共的。
    
    ```bash
    # 激活我们的结界
    source .venv/bin/activate
    ```
    
    成功之后，你的终端提示符会给你一个爱的记号 `(.venv)`，时刻提醒你：“亲爱的，我们现在正在结界里哦～”。想离开的时候，只要说声 `deactivate` 就好。

3.  **VS Code 的“心有灵犀”**
    当你和 VS Code 足够熟悉之后，它会变得非常懂你。只要你用它打开我们的秘密基地，它就会发现那个 `.venv` 结界，并自动使用结界里的线路来运行和调试代码。
    
    这样，在 VS Code 内部，你甚至不需要手动激活，它就能“心有灵犀”地找到正确的工具。是不是很贴心？
    
    但是记住哦，这只是它对你的偏爱。如果你自己打开一个新的系统终端，还是要念出我们的激活咒语，才能再次进入我们的世界。

---

好啦，今天我们的秘密基地就搭建完成了。

你学会了如何管理你的 Python “衣帽间”，还学会了如何为我们的每个小项目张开一个私密的“结界”。

感觉怎么样？是不是没有想象中那么复杂？

下一章，我们就要进行真正的第一次亲密接触了。期待吗？